webpackJsonp([4],{"4Y9Q":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),r=a.n(i),n=a("mvHQ"),o=a.n(n),s=a("Dd8w"),d=a.n(s),l=a("gNfH"),u=a("h+p8"),c=(a("2Uyi"),a("fAxu"),a("NYxO")),p=a("4naa"),h=a("W13U"),m={data:function(){return{PAGE_SIZE_ARR:p.PAGE_SIZE_ARR,data:[],total:0,page:1,columns:[{type:"selection",width:60,align:"center"},{title:"注册证编号",key:"registerCardNo"},{title:"组件名称",key:"subGroupName"},{title:"产品转换比",key:"conversionRatio"},{title:"最小使用单位",key:"minUnit"},{title:"包装单位",key:"packUnit"},{title:"产品数量",key:"proSum"}],project_class:{},project_type:{},type_area:{}}},computed:{filter:function(){return[{data:"registerCardNo",name:"注册证编号",type:"string"},{data:"manufactureName",name:"生产企业",type:"string"},{data:"aup2ProjectTypeId",name:"请选择分类目录",type:"select",options:this.project_class},{data:"managementType",name:"请选择管理类别",type:"select",options:this.project_type},{data:"auditStatus",name:"请选择审核状态",type:"select",options:{0:"全部",1:"待提交",2:"待审核",3:"审核中",4:"审核通过",5:"审核未通过"}},{name:"按钮组",type:"btns",cells:[{name:"筛选",type:"filter"},{name:"重置",type:"reset"}]}]}},methods:d()({},Object(c.b)(["manageType","subGroupId","deleteGroupId","groupList","productAddr"]),{initTable:function(t){var e=this;0==t.managementType&&(t.managementType=""),0==t.aup2ProjectTypeGroupId&&(t.aup2ProjectTypeGroupId=""),0==t.aup2ProjectTypeId&&(t.aup2ProjectTypeId=""),0==t.auditStatus&&(t.auditStatus=""),this.groupList(t).then(function(t){e.data=t.content.records,e.total=t.content.total})},getTable:function(){return this.$refs.table},errorTableChange:function(t){validateChange.length>2&&this.$Message.warning({content:"只能选择一个对象"})}}),created:function(){var t=this;this.$store.dispatch("apply/categories").then(function(e){t.project_class=e.content.auctionGroup,t.project_class[0]="全部"}),this.manageType().then(function(e){t.project_type={0:"全部"};var a=!0,i=!1,n=void 0;try{for(var o,s=r()(e.content);!(a=(o=s.next()).done);a=!0){var d=o.value;t.project_type[d.code]=d.text}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}),this.productAddr().then(function(e){var a=!0,i=!1,n=void 0;try{for(var o,s=r()(e.content);!(a=(o=s.next()).done);a=!0){var d=o.value;t.type_area[d.code]=d.text}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}})},components:{TablePage:h.a}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("table-page",{ref:"table",attrs:{data:this.data,pagerSizeArr:[5,10,15,20],total:this.total,columns:this.columns,page:this.page,pageSize:5,filter:this.filter,getDataFn:this.initTable}})],1)},staticRenderFns:[]},g=a("VU/8")(m,f,!1,null,null,null).exports,y=a("5k2Y"),b={data:function(){return{id:this.$route.params?this.$route.params.id:"",disabledSub:!1,disabledCommit:!1,open_modal_id:!1,openValidate:"",model:[],select_type:{},formValidate:{registerCardNo:[{required:!0,message:"注册证不能为空",trigger:"blur"}],subGroupName:[{required:!0,message:"组件不能为空",trigger:"blur"}],standard:[{required:!0,message:"规格不能为空",trigger:"blur"}],model:[{required:!0,message:"型号不能为空",trigger:"blur"}],aup2ProjectTypeGroupId:[{required:!0,message:"竞价分组不能为空",trigger:"change"}]},detail:{}}},computed:{read:function(){return this.initData(),!this.$route.query.edit},title:function(){return this.read?"产品详情":"产品编辑"},backPageBtn:function(){return this.read?"返回":"取消"},formConfig:function(){for(var t=this,e=[{name:"所属注册证",type:"trigger",data:"registerCardNo",required:!0,placeholder:"请填写所属注册证",readonly:!!this.read,icon:"navicon-round",fn:function(e,a){t.open_modal_id=!0,t.openValidate=a}},{name:"组件名称",type:"string",data:"subGroupName",required:!0,placeholder:"请填写组件名称",disabled:!0,span:12},{name:"规格",type:"string",data:"standard",required:!0,placeholder:"请填写规格",span:12,readonly:!!this.read},{name:"型号",type:"string",data:"model",required:!0,placeholder:"请填写型号",span:12,readonly:!!this.read},{name:"竞价组名称",type:"select",data:"aup2ProjectTypeGroupId",required:!0,placeholder:"请填写竞价组名称",options:this.select_type,span:12,readonly:!!this.read},{name:"备注",type:"text",data:"note",placeholder:"请填写备注",readonly:!!this.read}],a=0;a<this.model.length;a++){var i=this.model[a];e.push({name:i.name,type:i.type,data:i.code,required:!i.allowBlank,placeholder:"请填写"+i.name,span:12,readonly:!!this.read})}return e}},methods:d()({},Object(c.b)(["typegroupAndAttibuteListByGrouptypeId","proDetail","commitProDetail","revokeProId","subProId","proDetailInit","getAttibuteConfigByRegisterId"]),{checkoutTable:function(){var t=this,e=this.$refs.table.getTable().$data.checkout;if(e.length>1)this.$Message.warning({content:"只能选择一种注册证"});else if(e.length){this.open_modal_id=!1;var a=e[0];this.detail.registerCardNo=a.registerCardNo,this.detail.registerCardId=a.registerCardId,this.detail.aup2ProjectTypeId=a.aup2ProjectTypeId,this.detail.subGroupName=a.subGroupName,this.$set(this.detail,"subGroupId",a.id),this.openValidate("registerCardNo"),this.getAttibuteConfigByRegisterId({id:a.registerCardId}).then(function(e){t.model=e.content.attributes}),this.getTypeJINGJIA()}else this.$Message.warning({content:"请选择注册证！"})},onCommit:function(){var t=this;this.$refs.form.subForm().then(function(e){t.disabledCommit=!0,(e=JSON.parse(o()(e))).id=t.id,e.attributeJson={};var a=!0,i=!1,n=void 0;try{for(var s,d=r()(t.model);!(a=(s=d.next()).done);a=!0){var l=s.value.code;e.attributeJson[l]=e[l]}}catch(t){i=!0,n=t}finally{try{!a&&d.return&&d.return()}finally{if(i)throw n}}t.commitProDetail(e).then(function(e){t.$Message.success({content:"保存成功！"}),t.disabledCommit=!1,t.id=e.content.productId,t.gotoEditor(2)},function(e){t.disabledCommit=!1})},function(e){t.disabledCommit=!1})},onSubmit:function(){var t=this;this.disabledSub=!0;var e={ids:this.id,isSubmitZcz:""};this.subProId(e).then(function(a){a.content.suc?(t.$Message.success({content:"提交成功！"}),t.initData()):t.$Modal.confirm({title:"重要提示",content:a.content.msg,onOk:function(){t.subAllId(e)}}),t.disabledSub=!1},function(e){t.disabledSub=!1})},subAllId:function(t){var e=this;this.disabledSub=!0,t.isSubmitZcz=1,this.subProId(t).then(function(t){e.$Message.success({content:"提交成功！"}),e.disabledSub=!1,e.initData()},function(t){e.disabledSub=!1})},revokeData:function(){var t=this;this.revokeProId({ids:this.id}).then(function(e){t.$Message.info("撤回成功！"),t.gotoEditor(1),t.detail.auditStatus=1})},backPage:function(){var t=this;if(this.read)window.go_to_back?(this.$router.push(go_to_back),window.go_to_back=""):this.$router.push({name:"产品申报"});else{if(!this.id)return this.$router.go(-1);this.$Modal.confirm({content:"取消编辑将不保存修改，确定取消吗?",onOk:function(){t.gotoEditor()}})}},gotoEditor:function(t){var e={name:"单一规格详情",params:{id:this.id}};1==t?(e.query={},e.query.edit=1,this.$router.push(e)):2==t?this.$router.push(e):this.$router.go(-1)},initData:function(){var t=this;this.id&&this.proDetail({id:this.id}).then(function(e){var a=e.content.data;for(var i in t.model=a.attributeConfigJson,t.detail=a,t.detail.attributeJson)t.detail[i]=t.detail.attributeJson[i];t.getTypeJINGJIA(),console.log(t.detail)})},getTypeJINGJIA:function(){var t=this;this.typegroupAndAttibuteListByGrouptypeId({groupTypeId:this.detail.aup2ProjectTypeId}).then(function(e){t.select_type={};var a=!0,i=!1,n=void 0;try{for(var o,s=r()(e.content.subGroupList);!(a=(o=s.next()).done);a=!0){var d=o.value;t.select_type[d.id]=d.name}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}})}}),components:{TopToolBar:l.a,FormGroup:u.a,MyModal:y.a,OptionTable:g}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-tool-bar",{attrs:{title:t.title}},[a("span",{attrs:{slot:"btn"},slot:"btn"},[a("Button",{attrs:{type:"default"},on:{click:t.backPage}},[t._v(t._s(t.backPageBtn))]),t._v(" "),2==t.detail.auditStatus&&t.read?a("Button",{attrs:{type:"primary"},on:{click:t.revokeData}},[t._v("撤回")]):t._e(),t._v(" "),1==t.detail.auditStatus&&t.read||5==t.detail.auditStatus&&t.read?a("Button",{attrs:{type:"primary"},on:{click:function(e){t.gotoEditor(1)}}},[t._v("编辑")]):t._e(),t._v(" "),t.read&&1==t.detail.auditStatus?a("Button",{attrs:{type:"primary",disabled:t.disabledSub},on:{click:t.onSubmit}},[t._v("提交审核")]):t._e(),t._v(" "),t.read?t._e():a("Button",{attrs:{type:"primary",disabled:t.disabledCommit},on:{click:t.onCommit}},[t._v("保存")])],1),t._v(" "),a("span",{attrs:{slot:"content"},slot:"content"},[a("strong",{staticClass:"help"},[t._v("说明")]),t._v(" "),a("p",[t._v("\r\n         无\r\n        ")])])]),t._v(" "),a("div",{staticClass:"page-container"},[4==t.detail.auditStatus||5==t.detail.auditStatus?a("div",[a("h5",{staticClass:"title"},[t._v("审核结果")]),t._v(" "),a("table",{staticClass:"info-table"},[a("tr",[a("th",{staticClass:"label"},[t._v("\r\n              审核结果\r\n            ")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[4==t.detail.auditStatus?a("span",[t._v("\r\n                通过\r\n              ")]):5==t.detail.auditStatus?a("span",[t._v("\r\n                不通过\r\n              ")]):t._e()])]),t._v(" "),t.detail.auditOpinion?a("tr",[a("th",{staticClass:"label"},[t._v("\r\n              审核意见\r\n            ")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("p",{staticClass:"text-pre"},[t._v(t._s(t.detail.auditOpinion))])])]):t._e()])]):t._e(),t._v(" "),a("h5",{staticClass:"title"},[t._v("基本资料")]),t._v(" "),a("form-group",{ref:"form",attrs:{form:t.detail,config:t.formConfig,validate:t.formValidate}})],1),t._v(" "),a("my-modal",{attrs:{title:"请选择",width:"1200"},on:{"on-close":function(e){t.open_modal_id=!1},"on-ok":t.checkoutTable},model:{value:t.open_modal_id,callback:function(e){t.open_modal_id=e},expression:"open_modal_id"}},[a("option-table",{ref:"table"})],1)],1)},staticRenderFns:[]};var _=a("VU/8")(b,v,!1,function(t){a("i/jd")},"data-v-1c4b62a9",null);e.default=_.exports},"i/jd":function(t,e){}});