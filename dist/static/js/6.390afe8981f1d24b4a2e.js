webpackJsonp([6],{"5N65":function(t,e){},uQfj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("//Fk"),o=a.n(n),r=a("mvHQ"),i=a.n(r),l=a("Dd8w"),d=a.n(l),s=a("BO1k"),c=a.n(s),u=a("gNfH"),p=a("W13U"),y=a("5k2Y"),m=(a("fAxu"),a("NYxO")),f=a("4naa"),_={data:function(){var t=this,e=[];e.push({name:"待提交",data:[],size:f.PAGE_SIZE_ARR[0],total:0,page:1});var a=[{type:"selection",width:60,align:"center"},{title:"操作",render:function(e,a){return e("a",{on:{click:function(){t.getTableData(a.row.id)}}}," 价格维护")}},{title:"2018宁德最低价",key:"ndzdj_2018",className:"td--red"},{title:"福建省最低价",className:"td--red",key:"fjszdj_2018"},{title:"产品名称",key:"productName"},{title:"生产企业名称",key:"orgInfoName"},{title:"注册证编号",key:"registerCardNo"},{title:"组件名称",key:"subGroupName"},{title:"产品转换比",key:"conversionRatio"},{title:"最小使用单位",key:"minUnit"},{title:"包装单位",key:"packUnit"},{title:"型号",key:"model",render:function(e,a){return e("a",{on:{click:function(){t.clickLinkGoToBack(),t.$router.push({name:"产品公示",params:{id:a.row.id}})}}},a.row.model)}},{title:"规格",key:"standard",render:function(e,a){return e("a",{on:{click:function(){t.clickLinkGoToBack(),t.$router.push({name:"产品公示",params:{id:a.row.id}})}}},a.row.standard)}},{title:"竞价分组",key:"aup2ProjectTypeGroupName"},{title:"质量层次",key:"qualityName"}],n=this;return{disabledRevoke:!1,disabledSub:!1,active:0,PAGE_SIZE_ARR:f.PAGE_SIZE_ARR,qualityLists:{},tables:e,modal:{bool:!1,id:"",ndzdj_2018:"",ndzdjcgyy_2018:"",fjszdj_2018:"",fjszdjcgyy_2018:""},validate:{ndzdj_2018:[{trigger:"blur",validator:function(t,e,a){n.modal.ndzdj_2018?(e=Number(e),"NaN"==String(e)||e<0?a("最低价格式错误"):(n.modal.ndzdj_2018=e.toFixed(2),a())):n.modal.fjszdj_2018||n.modal.ndzdj_2018?a():a(new Error("宁德最低价和福建省最低价至少填写一项"))}}],ndzdjcgyy_2018:[{trigger:"blur",validator:function(t,e,a){n.modal.ndzdj_2018&&!e?a(new Error("2018宁德最低价采购医院不能为空")):a()}}],fjszdj_2018:[{trigger:"blur",validator:function(t,e,a){n.modal.fjszdj_2018?(e=Number(e),"NaN"==String(e)||e<0?a("最低价格式错误"):(n.modal.fjszdj_2018=e.toFixed(2),a())):n.modal.fjszdj_2018||n.modal.ndzdj_2018?a():a(new Error("宁德最低价和福建省最低价至少填写一项"))}}],fjszdjcgyy_2018:[{trigger:"blur",validator:function(t,e,a){n.modal.fjszdj_2018&&!e?a(new Error("2018福建省最低价采购医院不能为空")):a()}}]},project_class:{},project_type:{},project_type2:{},table_th:a,typegroupAndAttibuteListByGrouptype:""}},computed:{table_now:function(){return this.tables[this.active]},filter:function(){var t=this;return[{data:"registerCardNo",name:"注册证编号",type:"string"},{data:"subGroupName",name:"组件名称",type:"string"},{data:"manufactureName",name:"生产企业",type:"string"},{data:"conversionRatio",name:"产品转换比",type:"string"},{data:"packUnit",name:"包装单位",type:"string"},{data:"minUnit",name:"最小使用单位",type:"string"},{data:"standard",name:"规格",type:"string"},{data:"model",name:"型号",type:"string"},{data:"aup2ProjectTypeId",name:"请选择分类目录",type:"select",options:this.project_class,onChange:function(e){e&&t.typegroupAndAttibuteListByGrouptypeId({groupTypeId:e}).then(function(e){var a={0:"全部"},n=!0,o=!1,r=void 0;try{for(var i,l=c()(e.content.subGroupList);!(n=(i=l.next()).done);n=!0){var d=i.value;a[d.id]=d.name}}catch(t){o=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}t.project_type2=a})}},{data:"managementType",name:"请选择管理类别",type:"select",options:this.project_type},{data:"qualityId",name:"请选择质量层次",type:"select",options:this.qualityLists},{data:"aup2ProjectTypeGroupId",name:"请选择竞价组",type:"select",options:this.project_type2},{name:"按钮组",type:"btns",cells:[{name:"筛选",type:"filter"},{name:"重置",type:"reset"}]}]}},methods:d()({},Object(m.b)(["proList","qualityList","addProDataUpdate","addProData","addProDataDetail","manageType","subProId","deleteProId","revokeProId","typegroupAndAttibuteListByGrouptypeId"]),{clickLinkGoToBack:function(){window.go_to_back=this.$route.path},editTable:function(t){var e=this.$refs.table.checkout;return e.length?e.length>1?this.$Message.warning({content:"设置的对象只能有一个！"}):void this.getTableData(e[0].id):this.$Message.warning({content:"请选择要设置的对象！"})},getTableData:function(t){var e=this;t&&this.addProDataDetail({id:t}).then(function(a){for(var n in e.modal.id=t,a.content.attributeJson)e.modal[n]=a.content.attributeJson[n];e.modal.bool=!0})},subServer:function(){var t=this;this.$refs.form.validate(function(e){if(e){var a=JSON.parse(i()(t.modal)),n={id:a.id};delete a.id,delete a.bool,n.attributeJson=a,t.addProDataUpdate(n).then(function(e){t.$Message.success(e.content),t.modal.bool=!1,t.$refs.table.getData()})}})},initTable:function(t){var e=this;this.table_now.size=t.size,0==t.managementType&&(t.managementType=""),0==t.aup2ProjectTypeGroupId&&(t.aup2ProjectTypeGroupId=""),0==t.aup2ProjectTypeId&&(t.aup2ProjectTypeId=""),0==t.qualityId&&(t.qualityId=""),this.addProData(t).then(function(t){e.table_now.total=t.content.total,e.table_now.data=t.content.records,e.table_now.page=t.content.page})},initQualityList:function(t){if(null!=t){this.qualityLists={0:"全部"};var e=!0,a=!1,n=void 0;try{for(var o,r=c()(t);!(e=(o=r.next()).done);e=!0){var i=o.value;this.qualityLists[i.code]=i.text}}catch(t){a=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw n}}}},getQualityList:function(){var t=this;return this.qualityList().then(function(e){return t.initQualityList(e.content),t.loading=!1,o.a.resolve(e)},function(e){return t.loading=!1,o.a.reject(res)})}}),created:function(){var t=this;this.$store.dispatch("apply/categories").then(function(e){t.project_class=e.content.auctionGroup,t.project_class[0]="全部"}),this.manageType().then(function(e){t.project_type={0:"全部"};var a=!0,n=!1,o=void 0;try{for(var r,i=c()(e.content);!(a=(r=i.next()).done);a=!0){var l=r.value;t.project_type[l.code]=l.text}}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}}),this.getQualityList()},components:{TopToolBar:u.a,TablePage:p.a,MyModal:y.a}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-tool-bar",{staticClass:"title--bg",attrs:{title:"产品价格维护"}},[a("span",{attrs:{slot:"content"},slot:"content"},[a("strong",{staticClass:"help"},[t._v("说明")]),t._v(" "),a("p",[t._v("\n          无\n          ")])])]),t._v(" "),a("div",{staticClass:"page-container"},[a("table-page",{ref:"table",attrs:{filter:t.filter,columns:t.table_th,getDataFn:t.initTable,pagerSizeArr:t.PAGE_SIZE_ARR,pagerSize:t.table_now.size,data:t.table_now.data,total:t.table_now.total,setPage:t.table_now.page,storage:"aup2org"+t.$route.path}}),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[0==t.active?a("Button",{attrs:{type:"primary"},on:{click:t.editTable}},[t._v("价格维护")]):t._e()],1)],1),t._v(" "),a("my-modal",{attrs:{title:"请选择",width:"650"},on:{"on-close":function(e){t.modal.bool=!1},"on-ok":t.subServer},model:{value:t.modal.bool,callback:function(e){t.$set(t.modal,"bool",e)},expression:"modal.bool"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("Form",{ref:"form",attrs:{model:t.modal,"label-width":170,rules:t.validate}},[a("Row",{staticClass:"modal-form",attrs:{type:"flex",align:"middle",gutter:15}},[a("Col",{attrs:{span:"16 "}},[a("FormItem",{attrs:{label:"2018宁德最低价（元）",prop:"ndzdj_2018"}},[a("Input",{model:{value:t.modal.ndzdj_2018,callback:function(e){t.$set(t.modal,"ndzdj_2018",e)},expression:"modal.ndzdj_2018"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[t._v("\n            请填写最小使用单位的价格\n          ")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"2018宁德最低价采购医院",prop:"ndzdjcgyy_2018"}},[a("Input",{model:{value:t.modal.ndzdjcgyy_2018,callback:function(e){t.$set(t.modal,"ndzdjcgyy_2018",e)},expression:"modal.ndzdjcgyy_2018"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[t._v("\n            必须为宁德市县级以上医院\n          ")]),t._v(" "),a("Col",{attrs:{span:"16  "}},[a("FormItem",{attrs:{label:"2018福建省最低价",prop:"fjszdj_2018"}},[a("Input",{model:{value:t.modal.fjszdj_2018,callback:function(e){t.$set(t.modal,"fjszdj_2018",e)},expression:"modal.fjszdj_2018"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[t._v("\n            请填写最小使用单位的价格\n          ")]),t._v(" "),a("Col",{attrs:{span:"16  "}},[a("FormItem",{attrs:{label:"2018福建省最低价采购医院",prop:"fjszdjcgyy_2018"}},[a("Input",{model:{value:t.modal.fjszdjcgyy_2018,callback:function(e){t.$set(t.modal,"fjszdjcgyy_2018",e)},expression:"modal.fjszdjcgyy_2018"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[t._v("\n            必须为福建省其他地市县级以上医院\n          ")])],1)],1),t._v(" "),a("ol",{staticStyle:{"padding-left":"50px",color:"#f00","margin-top":"10px"}},[a("li",[t._v("宁德最低价和福建省最低价至少填写一项")]),t._v(" "),a("li",[t._v("价格必须真实，管理单位会核实价格")]),t._v(" "),a("li",[t._v("最低价（元）：保留小数点后2位（即：0.01），如果超出小数点后2位，则舍去。")])])],1)])],1)},staticRenderFns:[]};var g=a("VU/8")(_,v,!1,function(t){a("5N65"),a("vBLU")},null,null);e.default=g.exports},vBLU:function(t,e){}});