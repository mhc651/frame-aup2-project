webpackJsonp([9],{"0vHx":function(t,e){},R2gD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("//Fk"),i=a.n(n),s=a("Dd8w"),o=a.n(s),r=a("BO1k"),c=a.n(r),u=a("gNfH"),l=a("W13U"),d=a("NYxO"),p=a("4naa"),h={data:function(){var t=this,e=[];e.push({name:"待提交",data:[],size:p.PAGE_SIZE_ARR[0],total:0,page:1,auditStatus:1}),e.push({name:"待审核",size:p.PAGE_SIZE_ARR[0],data:[],total:0,page:1,auditStatus:2}),e.push({name:"审核中",size:p.PAGE_SIZE_ARR[0],total:0,page:1,data:[],auditStatus:3}),e.push({name:"已通过",size:p.PAGE_SIZE_ARR[0],total:0,page:1,data:[],auditStatus:4}),e.push({name:"未通过",size:p.PAGE_SIZE_ARR[0],total:0,data:[],page:1,auditStatus:5});var a=[{type:"selection",width:60,align:"center"},{title:"注册证编号",key:"registerCardNo"},{title:"组件名称",key:"subGroupName"},{title:"产品转换比",key:"conversionRatio"},{title:"最小使用单位",key:"minUnit"},{title:"包装单位",key:"packUnit"},{title:"型号",key:"model",render:function(e,a){return e("a",{on:{click:function(){t.clickLinkGoToBack(),t.$router.push({name:"单一规格详情",params:{id:a.row.id}})}}},a.row.model)}},{title:"规格",key:"standard",render:function(e,a){return e("a",{on:{click:function(){t.clickLinkGoToBack(),t.$router.push({name:"单一规格详情",params:{id:a.row.id}})}}},a.row.standard)}},{title:"竞价分组",key:"aup2ProjectTypeGroupName"},{title:"质量层次",key:"qualityName"}];return{disabledRevoke:!1,disabledSub:!1,active:0,PAGE_SIZE_ARR:p.PAGE_SIZE_ARR,qualityLists:{},tables:e,project_class:{},project_type:{},project_type2:{},table_th:a,typegroupAndAttibuteListByGrouptype:""}},computed:{table_now:function(){return this.tables[this.active]},filter:function(){var t=this;return[{data:"registerCardNo",name:"注册证编号",type:"string"},{data:"subGroupName",name:"组件名称",type:"string"},{data:"manufactureName",name:"生产企业",type:"string"},{data:"conversionRatio",name:"产品转换比",type:"string"},{data:"packUnit",name:"包装单位",type:"string"},{data:"minUnit",name:"最小使用单位",type:"string"},{data:"standard",name:"规格",type:"string"},{data:"model",name:"型号",type:"string"},{data:"aup2ProjectTypeId",name:"请选择分类目录",type:"select",options:this.project_class,onChange:function(e){e&&t.typegroupAndAttibuteListByGrouptypeId({groupTypeId:e}).then(function(e){var a={0:"全部"},n=!0,i=!1,s=void 0;try{for(var o,r=c()(e.content.subGroupList);!(n=(o=r.next()).done);n=!0){var u=o.value;a[u.id]=u.name}}catch(t){i=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}t.project_type2=a})}},{data:"managementType",name:"请选择管理类别",type:"select",options:this.project_type},{data:"qualityId",name:"请选择质量层次",type:"select",options:this.qualityLists},{data:"aup2ProjectTypeGroupId",name:"请选择竞价组",type:"select",options:this.project_type2},{name:"按钮组",type:"btns",cells:[{name:"筛选",type:"filter"},{name:"重置",type:"reset"}]}]}},methods:o()({},Object(d.b)(["proList","qualityList","manageType","subProId","deleteProId","revokeProId","typegroupAndAttibuteListByGrouptypeId"]),{gotoAdd:function(){this.clickLinkGoToBack(),this.$router.push("/LCSB/LCSB005/page/?edit=1")},clickLinkGoToBack:function(){window.go_to_back=this.$route.path},tabTable:function(t){this.active=t;var e=this.tables[t];this.$refs.table.getParamData({size:e.size,page:e.page,auditStatus:e.auditStatus})},initTable:function(t){var e=this;t.auditStatus||(t.auditStatus=1);for(var a=0;a<this.tables.length;a++){var n=this.tables[a];if(t.auditStatus==n.auditStatus){this.active!=a&&(this.active=a);break}}this.table_now.size=t.size,0==t.managementType&&(t.managementType=""),0==t.aup2ProjectTypeGroupId&&(t.aup2ProjectTypeGroupId=""),0==t.aup2ProjectTypeId&&(t.aup2ProjectTypeId=""),this.proList(t).then(function(t){e.table_now.total=t.content.total,e.table_now.data=t.content.records,e.table_now.page=t.content.page})},editTable:function(){var t=this.$refs.table.checkout;return t.length?t.length>1?this.$Message.warning({content:"只能选择一个对象进行编辑！"}):(this.clickLinkGoToBack(),void this.$router.push({name:"单一规格详情",params:{id:t[0].id},query:{edit:1}})):this.$Message.warning({content:"请选择要编辑的对象！"})},deleteTable:function(){var t=this,e=this.$refs.table.checkout;if(!e.length)return this.$Message.warning({content:"请选择要删除的对象！"});this.$Modal.confirm({content:"确定删除吗？此操作不可逆",onOk:function(){var a=e.map(function(t){return t.id}).join(",");t.deleteProId({ids:a}).then(function(e){t.$refs.table.getData()})}})},subTable:function(){var t=this,e=this.$refs.table.checkout;if(!e.length)return this.$Message.warning({content:"请选择要提交的对象！"});this.disabledSub=!0;var a={ids:e.map(function(t){return t.id}).join(","),isSubmitZcz:""};this.subProId(a).then(function(e){e.content.suc?(t.$Message.success({content:"提交成功！"}),t.$refs.table.getData()):t.$Modal.confirm({title:"重要提示",content:e.content.msg,onOk:function(){t.subAllId(a)}}),t.disabledSub=!1},function(e){t.disabledSub=!1})},subAllId:function(t){var e=this;this.disabledSub=!0,t.isSubmitZcz=1,this.subProId(t).then(function(t){e.$Message.success({content:"提交成功！"}),e.disabledSub=!1,e.$refs.table.getData()})},revokeTable:function(){var t=this,e=this.$refs.table.checkout;if(!e.length)return this.$Message.warning({content:"请选择要撤回的对象！"});this.disabledRevoke=!0;var a=e.map(function(t){return t.id}).join(",");this.revokeProId({ids:a}).then(function(e){t.$Message.success({content:"撤回成功！"}),t.disabledRevoke=!1,t.$refs.table.getData()},function(e){t.disabledRevoke=!1})},initQualityList:function(t){if(null!=t){this.qualityLists={0:"全部"};var e=!0,a=!1,n=void 0;try{for(var i,s=c()(t);!(e=(i=s.next()).done);e=!0){var o=i.value;this.qualityLists[o.code]=o.text}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}}},getQualityList:function(){var t=this;return this.qualityList().then(function(e){return t.initQualityList(e.content),t.loading=!1,i.a.resolve(e)},function(e){return t.loading=!1,i.a.reject(res)})}}),created:function(){var t=this;this.$store.dispatch("apply/categories").then(function(e){t.project_class=e.content.auctionGroup,t.project_class[0]="全部"}),this.manageType().then(function(e){t.project_type={0:"全部"};var a=!0,n=!1,i=void 0;try{for(var s,o=c()(e.content);!(a=(s=o.next()).done);a=!0){var r=s.value;t.project_type[r.code]=r.text}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}),this.getQualityList()},components:{TopToolBar:u.a,TablePage:l.a}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-tool-bar",{staticClass:"title--bg",attrs:{title:"产品管理"}},[a("span",{attrs:{slot:"content"},slot:"content"},[a("strong",{staticClass:"help"},[t._v("说明")]),t._v(" "),a("p",[t._v("\n          无\n          ")])])]),t._v(" "),a("div",{staticClass:"page-container"},[a("div",{staticClass:"head-tab"},t._l(t.tables,function(e,n){return a("a",{key:n,staticClass:"head-tab_btn",class:n===t.active?"active":"",on:{click:function(e){t.tabTable(n)}}},[t._v(" "+t._s(e.name)+"\n          ")])})),t._v(" "),a("table-page",{ref:"table",attrs:{filter:t.filter,columns:t.table_th,getDataFn:t.initTable,pagerSizeArr:t.PAGE_SIZE_ARR,pagerSize:t.table_now.size,data:t.table_now.data,total:t.table_now.total,setPage:t.table_now.page,storage:"aup2org"+t.$route.path}}),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[0==t.active?a("Button",{attrs:{type:"primary"},on:{click:t.gotoAdd}},[t._v("添加产品")]):t._e(),t._v(" "),0==t.active||4==t.active?a("Button",{on:{click:t.editTable}},[t._v("编辑")]):t._e(),t._v(" "),0==t.active?a("Button",{attrs:{type:"error"},on:{click:t.deleteTable}},[t._v("批量删除")]):t._e(),t._v(" "),0==t.active?a("Button",{attrs:{disabled:t.disabledSub,type:"primary"},on:{click:t.subTable}},[t._v("批量提交")]):t._e(),t._v(" "),1==t.active?a("Button",{attrs:{disabled:t.disabledRevoke,type:"primary"},on:{click:t.revokeTable}},[t._v("撤回审核")]):t._e()],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(h,b,!1,function(t){a("0vHx")},null,null);e.default=y.exports}});